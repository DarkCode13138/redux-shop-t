(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{199:function(e,t,n){e.exports=n(384)},204:function(e,t,n){},383:function(e,t,n){},384:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"setBooks",(function(){return f}));var r={};n.r(r),n.d(r,"addToCart",(function(){return C})),n.d(r,"removeFromCart",(function(){return j}));var c={};n.r(c),n.d(c,"setFilter",(function(){return I})),n.d(c,"setSearchQuery",(function(){return S}));var o=n(0),i=n.n(o),l=n(29),u=n.n(l),s=(n(204),n(16)),d=n(24),m=n(18),f=function(e){return{type:"SET_BOOKS",payload:e}},E=n(167),p=n(168),b=n(188),h=n(185),v=n(392),y=n(169),O=n.n(y),C=function(e){return{type:"ADD_TO_CART",payload:e}},j=function(e){return{type:"REMOVE_FROM_CART",payload:e}},g=n(396),k=n(187),_=n(32),w=n(385),R=function(e){var t=e.title,n=e.author,a=e.price,r=e.image,c=e.addToCart,o=e.addedCount;return i.a.createElement(g.a,null,i.a.createElement(k.a,{src:r}),i.a.createElement(g.a.Content,null,i.a.createElement(g.a.Header,null,t),i.a.createElement(g.a.Meta,null,i.a.createElement("span",{className:"date"},n))),i.a.createElement(g.a.Content,{extra:!0},i.a.createElement("a",null,i.a.createElement(_.a,{name:"rub"}),a)),i.a.createElement(w.a,{onClick:c.bind(void 0,e)},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u043a\u043e\u0440\u0437\u0438\u043d\u0443 ",o>0&&"(".concat(o,")")))},T=Object(d.b)((function(e,t){var n=e.cart,a=t.id;return{addedCount:n.items.reduce((function(e,t){return e+(t.id===a?1:0)}),0)}}),(function(e){return Object(s.a)({},Object(m.b)(r,e))}))(R),I=function(e){return{type:"SET_FILTER",payload:e}},S=function(e){return{type:"SET_QUERY",payload:e}},B=n(397),A=n(391),F=function(e){var t=e.setFilter,n=e.filterBy,a=e.searchQuery,r=e.setSearchQuery;return i.a.createElement(B.a,{secondary:!0},i.a.createElement(B.a.Item,{active:"all"===n,onClick:t.bind(void 0,"all")},"\u0412\u0441\u0435"),i.a.createElement(B.a.Item,{active:"price_high"===n,onClick:t.bind(void 0,"price_high")},"\u0426\u0435\u043d\u0430(\u0434\u043e\u0440\u043e\u0433\u0438\u0435)"),i.a.createElement(B.a.Item,{active:"price_low"===n,onClick:t.bind(void 0,"price_low")},"\u0426\u0435\u043d\u0430(\u0434\u0435\u0448\u0435\u0432\u044b\u0435)"),i.a.createElement(B.a.Item,{active:"author"===n,onClick:t.bind(void 0,"author")},"\u0410\u0432\u0442\u043e\u0440"),i.a.createElement(B.a.Item,null,i.a.createElement(A.a,{icon:"search",onChange:function(e){return r(e.target.value)},value:a,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0437\u0430\u043f\u0440\u043e\u0441..."})))},Q=Object(d.b)((function(e){e.books;return{filterBy:e.filter.filterBy}}),(function(e){return Object(s.a)({},Object(m.b)(c,e))}))(F),M=n(395),L=n(394),D=function(e){var t=e.title,n=e.id,a=e.image,r=e.removeFromCart;return i.a.createElement(M.a,{selection:!0,divided:!0,verticalAlign:"middle"},i.a.createElement(M.a.Item,null,i.a.createElement(M.a.Content,{floated:"right"},i.a.createElement(w.a,{onClick:r.bind(void 0,n),color:"red"},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c")),i.a.createElement(k.a,{avatar:!0,src:a}),i.a.createElement(M.a.Content,null,t)))},x=function(e){var t=e.totalPrice,n=e.count,a=e.items;return i.a.createElement(B.a,null,i.a.createElement(B.a.Item,{name:"browse",onClick:void 0},"\u041c\u0430\u0433\u0430\u0437\u0438\u043d \u043a\u043d\u0438\u0433"),i.a.createElement(B.a.Menu,{position:"right"},i.a.createElement(B.a.Item,{name:"signup",onClick:void 0},"\u0418\u0442\u043e\u0433\u043e: \xa0",i.a.createElement("b",null,t)," \u0440\u0443\u0431."),i.a.createElement(L.a,{trigger:i.a.createElement(B.a.Item,{name:"help",onClick:void 0},"\u041a\u043e\u0440\u0437\u0438\u043d\u0430 (",i.a.createElement("b",null,n),")"),content:a.map((function(e){return i.a.createElement(D,e)})),on:"click",hideOnScroll:!0})))},P=n(183),W=n.n(P),Y=Object(d.b)((function(e){var t=e.cart;return{totalPrice:t.items.reduce((function(e,t){return e+t.price}),0),count:t.items.length,items:W()(t.items,(function(e){return e.id}))}}),(function(e){return Object(s.a)({},Object(m.b)(r,e))}))(x),J=function(e){Object(b.a)(n,e);var t=Object(h.a)(n);function n(){return Object(E.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"componentWillMount",value:function(){var e=this.props.setBooks;O.a.get("/books.json").then((function(t){var n=t.data;e(n)}))}},{key:"render",value:function(){var e=this.props,t=e.books,n=e.isReady;return i.a.createElement(v.a,null,i.a.createElement(Y,null),i.a.createElement(Q,null),i.a.createElement(g.a.Group,{itemsPerRow:4},n?t.map((function(e,t){return i.a.createElement(T,Object.assign({key:t},e))})):"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."))}}]),n}(o.Component),K=n(78),U=n.n(K),V=function(e,t,n){return function(e,t){switch(t){case"price_high":return U()(e,"price","desc");case"price_low":return U()(e,"price","asc");case"author":return U()(e,"author","asc");default:return e}}(function(e,t){return e.filter((function(e){return e.title.toLowerCase().indexOf(t.toLowerCase())>=0||e.author.toLowerCase().indexOf(t.toLowerCase())>=0}))}(e,n),t)},G=Object(d.b)((function(e){var t=e.books,n=e.filter;return{books:t.items&&V(t.items,n.filterBy,n.searchQuery),isReady:t.isReady}}),(function(e){return Object(s.a)({},Object(m.b)(a,e))}))(J),H=n(184),N=n.n(H),$={isReady:!1,items:null},q=n(186),z={items:[]},X={searchQuery:"",filterBy:"all"},Z=Object(m.c)({books:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_BOOKS":return Object(s.a)({},e,{items:t.payload,isReady:!0});case"SET_IS_READY":return Object(s.a)({},e,{isReady:t.payload});default:return e}},cart:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_TO_CART":return Object(s.a)({},e,{items:[].concat(Object(q.a)(e.items),[t.payload])});case"REMOVE_FROM_CART":return Object(s.a)({},e,{items:e.items.filter((function(e){return e.id!=t.payload}))});default:return e}},filter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_QUERY":return Object(s.a)({},e,{searchQuery:t.payload});case"SET_FILTER":return Object(s.a)({},e,{filterBy:t.payload});default:return e}}});n(382),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(383);var ee=Object(m.d)(Z,Object(m.a)(N.a));u.a.render(i.a.createElement(d.a,{store:ee},i.a.createElement(G,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[199,1,2]]]);
//# sourceMappingURL=main.de8afcb4.chunk.js.map